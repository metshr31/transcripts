name: Werner Enterprises - Record & Transcribe

on:
  workflow_dispatch:
    inputs:
      minutes:
        description: "Recording length (minutes)"
        required: true
        default: "35"
        type: string
      model:
        description: "Whisper model"
        required: true
        default: "small"
        type: string
      probe_seconds:
        description: "Short test duration (seconds). 0 = full run"
        required: true
        default: "0"
        type: string
  # Werner scheduled 5 minutes early: 7:45 PM ET on Sept 10, 2025 = 23:45 UTC
  schedule:
    - cron: "45 23 10 9 *"

jobs:
  call:
    uses: ./.github/workflows/record_transcribe_reusable.yml
    with:
      url: "https://event.webcasts.com/starthere.jsp?ei=1732689&tp_key=88708506b9&tp_special=8"
      minutes: ${{ inputs.minutes }}
      model:   ${{ inputs.model }}
      probe_seconds: ${{ inputs.probe_seconds }}
      diarize: true
      max_speakers: "0"
    secrets:
      FIRST:         ${{ secrets.WERNER_FIRST }}
      LAST:          ${{ secrets.WERNER_LAST }}
      COMPANY:       ${{ secrets.WERNER_COMPANY }}
      EMAIL:         ${{ secrets.WERNER_EMAIL }}
      HF_TOKEN:      ${{ secrets.HF_TOKEN }}
      SMTP_SERVER:   ${{ secrets.SMTP_SERVER }}
      SMTP_PORT:     ${{ secrets.SMTP_PORT }}
      SMTP_USERNAME: ${{ secrets.SMTP_USERNAME }}
      SMTP_PASSWORD: ${{ secrets.SMTP_PASSWORD }}
      MAIL_FROM:     ${{ secrets.MAIL_FROM }}
      MAIL_TO:       ${{ secrets.MAIL_TO }}
